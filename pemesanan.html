<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Pemesanan Tiket</title>
  <link rel="stylesheet" href="pemesanan.css">
</head>
<body>
    
  <div class="container">
    <h2>Form Pemesanan Tiket</h2>
    <form id="formPemesanan">
      <label for="nama">Nama Lengkap Kamu:</label>
      <input type="text" id="nama" name="nama">
      <div id="error-nama" class="error"></div>

      <label for="email">Email Kamu:</label>
      <input type="text" id="email" name="email">
      <div id="error-email" class="error"></div>

      <label for="film">Pilih Film</label>
      <select id="film" name="film">
        <option value="">Pilih Film Disini</option>
        <option value="50000">Indosiar - Rp40.000</option>
        <option value="45000">RCTI - Rp40.000</option>
        <option value="40000">SCTV- Rp40.000</option>
        <option value="40000">Global TV- Rp40.000</option>
      </select>
      <div id="error-film" class="error"></div>

      <label for="jumlah">Jumlah Tiket Yang Ingin Di Pesan:</label>
      <input type="number" id="jumlah" name="jumlah" min="1" max="10">
      <div id="error-jumlah" class="error"></div>

      <div class="total" id="preview"></div>

      <button type="submit">Pesan</button>
    </form>
  </div>

  <script>
    const form = document.getElementById('formPemesanan');
    const nama = document.getElementById('nama');
    const email = document.getElementById('email');
    const film = document.getElementById('film');
    const jumlah = document.getElementById('jumlah');
    const preview = document.getElementById('preview');

    // Preview total harga
    function updateTotal() {
      const harga = parseInt(film.value) || 0;
      const qty = parseInt(jumlah.value) || 0;
      const total = harga * qty;

      if (harga && qty) {
        preview.textContent = `Total Harga: Rp${total.toLocaleString()}`;
      } else {
        preview.textContent = "";
      }
    }

    film.addEventListener("change", updateTotal);
    jumlah.addEventListener("input", updateTotal);

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      // Reset error
      document.querySelectorAll('.error').forEach(el => el.textContent = '');

      let valid = true;

      if (nama.value.trim() === '') {
        document.getElementById('error-nama').textContent = 'Nama tidak boleh kosong';
        valid = false;
      }

      const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
      if (email.value.trim() === '') {
        document.getElementById('error-email').textContent = 'Email tidak boleh kosong';
        valid = false;
      } else if (!emailPattern.test(email.value)) {
        document.getElementById('error-email').textContent = 'Format email tidak valid';
        valid = false;
      }

      if (film.value === '') {
        document.getElementById('error-film').textContent = 'Pilih film terlebih dahulu';
        valid = false;
      }

      const jumlahValue = parseInt(jumlah.value);
      if (isNaN(jumlahValue)) {
        document.getElementById('error-jumlah').textContent = 'Jumlah tiket harus diisi';
        valid = false;
      } else if (jumlahValue < 1 || jumlahValue > 10) {
        document.getElementById('error-jumlah').textContent = 'Jumlah tiket minimal 1 dan maksimal 10';
        valid = false;
      }

      if (valid) {
        alert(`Terima kasih ${nama.value}! Pemesanan tiket berhasil.`);
        form.reset();
        preview.textContent = "";
      }
    });
  </script>
</body>
</html>
